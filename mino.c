#include "mino.h"

static const char Iarray[4][4][2] = {
    {{2, 0}, {2, 1}, {2, 2}, {2, 3}}, /* DIR_N */
    {{0, 2}, {1, 2}, {2, 2}, {3, 2}}, /* DIR_E */
    {{1, 0}, {1, 1}, {1, 2}, {1, 3}}, /* DIR_S */
    {{0, 1}, {1, 1}, {2, 1}, {3, 1}}  /* DIR_W */
};

static const char Oarray[4][4][2] = {
    {{2, 1}, {2, 2}, {3, 1}, {3, 2}},
    {{2, 1}, {2, 2}, {3, 1}, {3, 2}},
    {{2, 1}, {2, 2}, {3, 1}, {3, 2}},
    {{2, 1}, {2, 2}, {3, 1}, {3, 2}},
};

static const char Sarray[4][4][2] = {
    {{2, 0}, {2, 1}, {3, 1}, {3, 2}},
    {{1, 2}, {2, 1}, {2, 2}, {3, 1}},
    {{1, 0}, {1, 1}, {2, 1}, {2, 2}},
    {{1, 1}, {2, 0}, {2, 1}, {3, 0}}
};

static const char Zarray[4][4][2] = {
    {{2, 1}, {2, 2}, {3, 0}, {3, 1}},
    {{1, 1}, {2, 1}, {2, 2}, {3, 2}},
    {{1, 1}, {1, 2}, {2, 0}, {2, 1}},
    {{1, 0}, {2, 0}, {2, 1}, {3, 1}}
};

static const char Jarray[4][4][2] = {
    {{2, 0}, {2, 1}, {2, 2}, {3, 0}},
    {{1, 1}, {2, 1}, {3, 1}, {3, 2}},
    {{1, 2}, {2, 0}, {2, 1}, {2, 2}},
    {{1, 0}, {1, 1}, {2, 1}, {3, 1}}
};

static const char Larray[4][4][2] = {
    {{2, 0}, {2, 1}, {2, 2}, {3, 2}},
    {{1, 1}, {1, 2}, {2, 1}, {3, 1}},
    {{1, 0}, {2, 0}, {2, 1}, {2, 2}},
    {{1, 1}, {2, 1}, {3, 0}, {3, 1}}
};

static const char Tarray[4][4][2] = {
    {{2, 0}, {2, 1}, {2, 2}, {3, 1}},
    {{1, 1}, {2, 1}, {2, 2}, {3, 1}},
    {{1, 1}, {2, 0}, {2, 1}, {2, 2}},
    {{1, 1}, {2, 0}, {2, 1}, {3, 1}}
};

/* SRSのズレの一覧配列,8の内0, 1, 2, 3は
それぞれの向きからの時計回り回転時のoffset、
4, 5, 6, 7はそれぞれ0, 1, 2, 3の向きからの
半時計回り回転時のoffset */
const char Ioffsets[8][5][2] = {
    {{0, 0}, {0, -2}, {0, 1}, {-1, -2}, {2, 1}},
    {{0, 0}, {0, -1}, {0, 2}, {2, -1}, {-1, 2}},
    {{0, 0}, {0, 2}, {0, -1}, {1, 2}, {-2, -1}},
    {{0, 0}, {0, -2}, {0, 1}, {-2, 1}, {1, -2}},
    {{0, 0}, {0, -1}, {0, 2}, {2, -1}, {-1, 2}},
    {{0, 0}, {0, 2}, {0, -1}, {1, 2}, {-2, -1}},
    {{0, 0}, {0, 1}, {0, -2}, {-2, 1}, {1, -2}},
    {{0, 0}, {0, 1}, {0, -2}, {-1, -2}, {2, 1}},
};

const char NOTIoffsets[8][5][2] = {
    {{0, 0}, {0, -1}, { 1, -1}, {-2, 0}, {-2, -1}},
    {{0, 0}, {0,  1}, {-1,  1}, { 2, 0}, { 2,  1}},
    {{0, 0}, {0,  1}, { 1,  1}, {-2, 0}, {-2,  1}},
    {{0, 0}, {0, -1}, {-1, -1}, { 2, 0}, { 2, -1}},
    {{0, 0}, {0,  1}, { 1,  1}, {-2, 0}, {-2,  1}},
    {{0, 0}, {0,  1}, {-1,  1}, { 2, 0}, { 2,  1}},
    {{0, 0}, {0, -1}, { 1, -1}, {-2, 0}, {-2, -1}},
    {{0, 0}, {0, -1}, {-1, -1}, { 2, 0}, { 2, -1}},
};

const char (*MINOSarray[])[4][2] = {
    [IMINO] = Iarray, [OMINO] = Oarray,
    [SMINO] = Sarray, [ZMINO] = Zarray,
    [JMINO] = Jarray, [LMINO] = Larray,
    [TMINO] = Tarray
};

const char (*SRSoffsets[])[5][2] = {
    [IMINO] = Ioffsets, [OMINO] = NOTIoffsets,
    [SMINO] = NOTIoffsets, [ZMINO] = NOTIoffsets,
    [JMINO] = NOTIoffsets, [LMINO] = NOTIoffsets,
    [TMINO] = NOTIoffsets
};
